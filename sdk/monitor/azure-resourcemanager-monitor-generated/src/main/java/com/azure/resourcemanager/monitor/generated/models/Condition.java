// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
// Code generated by Microsoft (R) AutoRest Code Generator.

package com.azure.resourcemanager.monitor.generated.models;

import com.azure.core.annotation.Fluent;
import com.azure.core.util.logging.ClientLogger;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonProperty;
import java.util.List;

/** A condition of the scheduled query rule. */
@Fluent
public final class Condition {
    @JsonIgnore private final ClientLogger logger = new ClientLogger(Condition.class);

    /*
     * Log query alert
     */
    @JsonProperty(value = "query")
    private String query;

    /*
     * Aggregation type. Relevant and required only for rules of the kind
     * LogAlert.
     */
    @JsonProperty(value = "timeAggregation", required = true)
    private TimeAggregation timeAggregation;

    /*
     * The column containing the metric measure number. Relevant only for rules
     * of the kind LogAlert.
     */
    @JsonProperty(value = "metricMeasureColumn")
    private String metricMeasureColumn;

    /*
     * The column containing the resource id. The content of the column must be
     * a uri formatted as resource id. Relevant only for rules of the kind
     * LogAlert.
     */
    @JsonProperty(value = "resourceIdColumn")
    private String resourceIdColumn;

    /*
     * List of Dimensions conditions
     */
    @JsonProperty(value = "dimensions")
    private List<Dimension> dimensions;

    /*
     * The criteria operator. Relevant and required only for rules of the kind
     * LogAlert.
     */
    @JsonProperty(value = "operator", required = true)
    private ConditionOperator operator;

    /*
     * the criteria threshold value that activates the alert. Relevant and
     * required only for rules of the kind LogAlert.
     */
    @JsonProperty(value = "threshold", required = true)
    private double threshold;

    /*
     * The minimum number of violations required within the selected lookback
     * time window required to raise an alert. Relevant only for rules of the
     * kind LogAlert.
     */
    @JsonProperty(value = "failingPeriods")
    private ConditionFailingPeriods failingPeriods;

    /*
     * The name of the metric to be sent. Relevant and required only for rules
     * of the kind LogToMetric.
     */
    @JsonProperty(value = "metricName")
    private String metricName;

    /**
     * Get the query property: Log query alert.
     *
     * @return the query value.
     */
    public String query() {
        return this.query;
    }

    /**
     * Set the query property: Log query alert.
     *
     * @param query the query value to set.
     * @return the Condition object itself.
     */
    public Condition withQuery(String query) {
        this.query = query;
        return this;
    }

    /**
     * Get the timeAggregation property: Aggregation type. Relevant and required only for rules of the kind LogAlert.
     *
     * @return the timeAggregation value.
     */
    public TimeAggregation timeAggregation() {
        return this.timeAggregation;
    }

    /**
     * Set the timeAggregation property: Aggregation type. Relevant and required only for rules of the kind LogAlert.
     *
     * @param timeAggregation the timeAggregation value to set.
     * @return the Condition object itself.
     */
    public Condition withTimeAggregation(TimeAggregation timeAggregation) {
        this.timeAggregation = timeAggregation;
        return this;
    }

    /**
     * Get the metricMeasureColumn property: The column containing the metric measure number. Relevant only for rules of
     * the kind LogAlert.
     *
     * @return the metricMeasureColumn value.
     */
    public String metricMeasureColumn() {
        return this.metricMeasureColumn;
    }

    /**
     * Set the metricMeasureColumn property: The column containing the metric measure number. Relevant only for rules of
     * the kind LogAlert.
     *
     * @param metricMeasureColumn the metricMeasureColumn value to set.
     * @return the Condition object itself.
     */
    public Condition withMetricMeasureColumn(String metricMeasureColumn) {
        this.metricMeasureColumn = metricMeasureColumn;
        return this;
    }

    /**
     * Get the resourceIdColumn property: The column containing the resource id. The content of the column must be a uri
     * formatted as resource id. Relevant only for rules of the kind LogAlert.
     *
     * @return the resourceIdColumn value.
     */
    public String resourceIdColumn() {
        return this.resourceIdColumn;
    }

    /**
     * Set the resourceIdColumn property: The column containing the resource id. The content of the column must be a uri
     * formatted as resource id. Relevant only for rules of the kind LogAlert.
     *
     * @param resourceIdColumn the resourceIdColumn value to set.
     * @return the Condition object itself.
     */
    public Condition withResourceIdColumn(String resourceIdColumn) {
        this.resourceIdColumn = resourceIdColumn;
        return this;
    }

    /**
     * Get the dimensions property: List of Dimensions conditions.
     *
     * @return the dimensions value.
     */
    public List<Dimension> dimensions() {
        return this.dimensions;
    }

    /**
     * Set the dimensions property: List of Dimensions conditions.
     *
     * @param dimensions the dimensions value to set.
     * @return the Condition object itself.
     */
    public Condition withDimensions(List<Dimension> dimensions) {
        this.dimensions = dimensions;
        return this;
    }

    /**
     * Get the operator property: The criteria operator. Relevant and required only for rules of the kind LogAlert.
     *
     * @return the operator value.
     */
    public ConditionOperator operator() {
        return this.operator;
    }

    /**
     * Set the operator property: The criteria operator. Relevant and required only for rules of the kind LogAlert.
     *
     * @param operator the operator value to set.
     * @return the Condition object itself.
     */
    public Condition withOperator(ConditionOperator operator) {
        this.operator = operator;
        return this;
    }

    /**
     * Get the threshold property: the criteria threshold value that activates the alert. Relevant and required only for
     * rules of the kind LogAlert.
     *
     * @return the threshold value.
     */
    public double threshold() {
        return this.threshold;
    }

    /**
     * Set the threshold property: the criteria threshold value that activates the alert. Relevant and required only for
     * rules of the kind LogAlert.
     *
     * @param threshold the threshold value to set.
     * @return the Condition object itself.
     */
    public Condition withThreshold(double threshold) {
        this.threshold = threshold;
        return this;
    }

    /**
     * Get the failingPeriods property: The minimum number of violations required within the selected lookback time
     * window required to raise an alert. Relevant only for rules of the kind LogAlert.
     *
     * @return the failingPeriods value.
     */
    public ConditionFailingPeriods failingPeriods() {
        return this.failingPeriods;
    }

    /**
     * Set the failingPeriods property: The minimum number of violations required within the selected lookback time
     * window required to raise an alert. Relevant only for rules of the kind LogAlert.
     *
     * @param failingPeriods the failingPeriods value to set.
     * @return the Condition object itself.
     */
    public Condition withFailingPeriods(ConditionFailingPeriods failingPeriods) {
        this.failingPeriods = failingPeriods;
        return this;
    }

    /**
     * Get the metricName property: The name of the metric to be sent. Relevant and required only for rules of the kind
     * LogToMetric.
     *
     * @return the metricName value.
     */
    public String metricName() {
        return this.metricName;
    }

    /**
     * Set the metricName property: The name of the metric to be sent. Relevant and required only for rules of the kind
     * LogToMetric.
     *
     * @param metricName the metricName value to set.
     * @return the Condition object itself.
     */
    public Condition withMetricName(String metricName) {
        this.metricName = metricName;
        return this;
    }

    /**
     * Validates the instance.
     *
     * @throws IllegalArgumentException thrown if the instance is not valid.
     */
    public void validate() {
        if (timeAggregation() == null) {
            throw logger
                .logExceptionAsError(
                    new IllegalArgumentException("Missing required property timeAggregation in model Condition"));
        }
        if (dimensions() != null) {
            dimensions().forEach(e -> e.validate());
        }
        if (operator() == null) {
            throw logger
                .logExceptionAsError(
                    new IllegalArgumentException("Missing required property operator in model Condition"));
        }
        if (failingPeriods() != null) {
            failingPeriods().validate();
        }
    }
}
